<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>


<?php 
$baseUrl = $this->getUrl();
$currentUrl = $this->helper('core/url')->getCurrentUrl();
$filterUrl = $baseUrl.'customer/account/create';
$filterUrlOne = $baseUrl.'customer/account/create/';

	  if(strcmp($currentUrl,$filterUrl) == 0)
	  { 
	 	$genderReqired = 1; 
		 echo "<div style='display:none'>Gender Required =".$genderReqired."</div>"; 
      }
	  
	  if(strcmp($currentUrl,$filterUrlOne) == 0)
	  { 
		$genderReqired = 2;
		 echo "<div style='display:none'>Gender Required = ".$genderReqired."</div>"; 
      }
 ?>

<label for="<?php echo $this->getFieldId('gender')?>"<?php if ($this->isRequired()) echo ' class="required"' ?> 
<?php if ($genderReqired) echo ' class="required"' ?>>
<?php if ($this->isRequired()) echo '<em>*</em>' ?>
<?php if ($genderReqired) echo '<em>*</em>' ?>
<?php echo $this->__('Gender') ?></label>
<div class="input-box">
    <select id="<?php echo $this->getFieldId('gender')?>" name="<?php echo $this->getFieldName('gender')?>" title="<?php echo $this->__('Gender') ?>" <?php if($this->isRequired()){ ?> class="validate-select"<?php } ?> <?php echo $this->getFieldParams() ?> >
        <?php $options = Mage::getResourceSingleton('customer/customer')->getAttribute('gender')->getSource()->getAllOptions();?>
        <?php $value = $this->getGender();?>
        <?php foreach ($options as $option):?>
            <?php 
			if($genderReqired)
			{
			if($option['value'])
			{ ?>       
            <option value="<?php echo $option['value'] ?>"<?php if ($option['value'] == $value) echo ' selected="selected"' ?>><?php echo $option['label'] ?></option>
            <?php 
			}
			}else
			{ ?>
            <option value="<?php echo $option['value'] ?>"<?php if ($option['value'] == $value) echo ' selected="selected"' ?>><?php echo $option['label'] ?></option>
			<?php	} ?>
        <?php endforeach;?>
    </select>
</div>